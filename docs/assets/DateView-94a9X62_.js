import{o as n,c as p,r as k,d as x,a as w,b as g,e as s,w as b,v as C,f as a,g as l,F as $,h as D,i as M,t as d}from"./index-poL_AwCl.js";import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={},V={style:{cursor:"pointer"}};function A(j,_){return n(),p("span",V,"⬆")}const I=m(B,[["render",A]]),T={},Y={style:{cursor:"pointer"}};function F(j,_){return n(),p("span",Y,"⬇")}const i=m(T,[["render",F]]),N={class:"row mb-3"},U={class:"col-4"},E={key:0,class:"table"},O={class:"border-start"},S=["href"],q={class:"border-start"},z="https://valeur.backlog.jp/FindIssueAllOver.action?allOver=true&assignerId=?&limit=20&offset=0&order=false&projectId=48115&projectId=90404&projectId=92327&projectId=104575&projectId=106799&projectId=107506&projectId=111843&projectId=111905&projectId=125699&projectId=127836&projectId=127937&projectId=139380&projectId=143275&projectId=151827&projectId=154956&projectId=155794&projectId=162798&projectId=164065&projectId=167758&projectId=171237&projectId=180138&projectId=181438&projectId=181478&projectId=182111&projectId=193241&projectId=198448&projectId=200798&projectId=204913&simpleSearch=false&sort=LIMIT_DATE&startDate.unspecified=false&statusId=1&statusId=2&statusId=31203&statusId=31202&statusId=12560&statusId=31235&statusId=31217&statusId=31215&statusId=12586&statusId=31231&statusId=31213&statusId=6742&statusId=31229&statusId=13187&statusId=31233&statusId=31205&statusId=31211&statusId=11614&statusId=14696&statusId=31207&statusId=25109&statusId=25110&statusId=25108&statusId=25148&statusId=16364&statusId=31220&statusId=23368&statusId=25086&statusId=25088&statusId=31219&statusId=31237&statusId=27987&statusId=31367&statusId=32299&statusId=32747&statusId=32974&statusId=38629&statusId=43848&statusId=48521&statusId=50223&statusId=53166&statusId=51607&statusId=43839",J={__name:"DateView",setup(j){const _=k([]),c=k([]),f=k(x().lastMonday().format("YYYY-MM-DD")),r=k({assign_count:null,resolve_count:null,expire_count:null,change_count:null,add_count:null,close_count:null}),y=async()=>{const u=await g.get("",{params:{route:"issue_count_logs.date",date:f.value}});c.value=u.data.issue_count_logs,o("assign_count",!0)},o=(u,t)=>{c.value=c.value.sort((e,v)=>t?v[u]-e[u]:e[u]-v[u]),r.value={assign_count:null,resolve_count:null},r.value[u]=t};return w(async()=>{const u=await g.get("",{params:{route:"users"}});_.value=u.data.users,await y()}),(u,t)=>(n(),p($,null,[s("div",N,[s("div",U,[t[15]||(t[15]=s("label",{for:"date",class:"form-label"},"日付",-1)),b(s("input",{onChange:y,id:"date",type:"date",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e)},null,544),[[C,f.value]])])]),c.value.length?(n(),p("table",E,[t[25]||(t[25]=s("caption",{class:"caption-top p-0"},[a(" 全体のチケット状況を見て件数の多い所を司会者が指摘"),s("br"),a(" 例) ○さんの担当チケットが多い、○さんの期限切れチケットが多いなど ")],-1)),s("thead",null,[t[24]||(t[24]=s("tr",null,[s("th",null," "),s("th",{class:"text-center",colspan:"4"},"定点観測"),s("th",{class:"text-center border-start",colspan:"3"},"差分観測")],-1)),s("tr",null,[t[23]||(t[23]=s("th",null,"担当者名",-1)),s("th",null,[t[16]||(t[16]=a(" 担当チケット  ")),r.value.assign_count?(n(),l(i,{key:0,onClick:t[1]||(t[1]=e=>o("assign_count",!1))})):(n(),l(I,{key:1,onClick:t[2]||(t[2]=e=>o("assign_count",!0))}))]),s("th",null,[t[17]||(t[17]=a(" 今週期限  ")),r.value.due_week_count?(n(),l(i,{key:0,onClick:t[3]||(t[3]=e=>o("due_week_count",!1))})):(n(),l(I,{key:1,onClick:t[4]||(t[4]=e=>o("due_week_count",!0))}))]),s("th",null,[t[18]||(t[18]=a(" 処理済み  ")),r.value.resolve_count?(n(),l(i,{key:0,onClick:t[5]||(t[5]=e=>o("resolve_count",!1))})):(n(),l(I,{key:1,onClick:t[6]||(t[6]=e=>o("resolve_count",!0))}))]),s("th",null,[t[19]||(t[19]=a(" 期限切れ  ")),r.value.expire_count?(n(),l(i,{key:0,onClick:t[7]||(t[7]=e=>o("expire_count",!1))})):(n(),l(I,{key:1,onClick:t[8]||(t[8]=e=>o("expire_count",!0))}))]),s("th",O,[t[20]||(t[20]=a(" 期限日変更  ")),r.value.change_count?(n(),l(i,{key:0,onClick:t[9]||(t[9]=e=>o("change_count",!1))})):(n(),l(I,{key:1,onClick:t[10]||(t[10]=e=>o("change_count",!0))}))]),s("th",null,[t[21]||(t[21]=a(" 追加  ")),r.value.add_count?(n(),l(i,{key:0,onClick:t[11]||(t[11]=e=>o("add_count",!1))})):(n(),l(I,{key:1,onClick:t[12]||(t[12]=e=>o("add_count",!0))}))]),s("th",null,[t[22]||(t[22]=a(" 消化  ")),r.value.close_count?(n(),l(i,{key:0,onClick:t[13]||(t[13]=e=>o("close_count",!1))})):(n(),l(I,{key:1,onClick:t[14]||(t[14]=e=>o("close_count",!0))}))])])]),s("tbody",null,[(n(!0),p($,null,D(c.value,(e,v)=>(n(),p("tr",{key:v},[s("th",null,d(e.name),1),s("td",null,[s("a",{target:"_blank",href:z.replace("assignerId=?",`assignerId=${e.user_id}`)},d(e.assign_count),9,S)]),s("td",null,d(e.due_week_count),1),s("td",null,d(e.resolve_count),1),s("td",null,d(e.expire_count),1),s("td",q,d(e.change_count),1),s("td",null,d(e.add_count),1),s("td",null,d(e.close_count),1)]))),128))])])):M("",!0)],64))}};export{J as default};
