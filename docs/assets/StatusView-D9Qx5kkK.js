import{r as d,d as i,a as k,c as p,e as t,w as v,j as V,F as Y,h as x,v as b,f as w,g as B,i as C,b as h,_ as j,o as m,t as N}from"./index-poL_AwCl.js";import{_ as S}from"./LineChart-DJZqAhqs.js";const L={class:"row mb-3"},U={class:"col-4"},F={class:"col-4"},O={class:"col-4"},T={key:0,class:"figure w-100"},q={__name:"StatusView",setup(E){const _=["担当チケット","今週期限","処理済み","期限切れ","期限日変更","追加","消化"],f=d(_[0]),a=d(i().lastMonday().subtract(4,"week").format("YYYY-MM-DD")),o=d(i().lastMonday().format("YYYY-MM-DD")),l=d({}),n=async()=>{const r=await h.get("",{params:{route:"issue_count_logs.status",from_date:a.value,to_date:o.value}}),e=[],s=[],g=Object.groupBy(r.data.issue_count_logs,({user_name:c})=>c),D=y(f.value);for(const c in g){const M=g[c];s.push({label:c,data:j.map(M,D)})}let u=a.value;for(;u!==i(o.value).add(1,"week").format("YYYY-MM-DD");)e.push(u),u=i(u).add(1,"week").format("YYYY-MM-DD");l.value={labels:e,datasets:s}},y=r=>{switch(r){case"担当チケット":return"assign_count";case"今週期限":return"due_week_count";case"処理済み":return"resolve_count";case"期限切れ":return"expire_count";case"期限日変更":return"change_count";case"追加":return"add_count";case"消化":return"close_count"}};return k(async()=>{await n()}),(r,e)=>(m(),p(Y,null,[t("div",L,[t("div",U,[e[3]||(e[3]=t("label",{for:"date",class:"form-label"},"項目",-1)),v(t("select",{onChange:n,class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s)},[(m(),p(Y,null,x(_,s=>t("option",{key:s},N(s),1)),64))],544),[[V,f.value]])]),t("div",F,[e[4]||(e[4]=t("label",{for:"date",class:"form-label"},"日付",-1)),v(t("input",{onChange:n,id:"date",type:"date",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s)},null,544),[[b,a.value]])]),t("div",O,[e[5]||(e[5]=t("label",{for:"date",class:"form-label"},"日付",-1)),v(t("input",{onChange:n,id:"date",type:"date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s)},null,544),[[b,o.value]])])]),Object.keys(l.value).length!==0?(m(),p("figure",T,[e[6]||(e[6]=t("figcaption",{class:"figure-caption fs-6"},[w(" チケット件数の推移を確認し、件数が高いまま変わっていなかったり、上昇傾向にある人が居たら指摘する"),t("br"),w(" ※チャートの上の名前を押すと対象のデータを非表示に出来ます ")],-1)),(m(),B(S,{key:l.value,data:l.value},null,8,["data"]))])):C("",!0)],64))}};export{q as default};
